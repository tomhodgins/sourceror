<!--
  To inspect pages using a bookmarklet, create a bookmark with the following address:
  javascript:(function(){window.open('http://caduceus.io/inspect?'+window.location.href)})()
-->

<!DOCTYPE html>
<meta charset=utf-8>
<title>View Source</title>
<meta name=viewport content="width=device-width, initial-scale=1">
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/paraiso-dark.min.css" rel=stylesheet>
<link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400,500,600,700,900" rel=stylesheet>

<style>
  * {
    box-sizing: border-box;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-kerning: auto;

  }
  html {
    -webkit-text-size-adjust: 100%;
  }
  body {
    margin: 0;
    background: #2f1e2e;
    padding: 1em;
  }
  pre,
  code {
    margin: 0;
    font-weight: normal;
    font-family: 'Fira Code', 'Source Code Pro', Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 16pt;
    line-height: 1.5;
    color: #839496;
    padding: .25em;
    -moz-tab-size: 2;
    -o-tab-size: 2;
    tab-size: 2;
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
  ::-moz-selection {
    color: #002b36;
    background: #eee8d5;
  }
  ::selection {
    color: #002b36;
    background: #eee8d5;
  }
</style>

<pre><code></code></pre>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>

<script>
  const output = document.querySelector('code')
  const url = window.location.search.substring(1)
  const extension = url.split('.')[1]
  const xhr = new XMLHttpRequest

  try {
    xhr.open('GET', url, false)
    xhr.send(null)
  }

  catch(e) {
    xhr.open('GET', 'proxy.php?url=' + url, false)
    xhr.send(null)
  }

  if (xhr.status == 200) {
    output.innerHTML = xhr.responseText
      .replace(/&/g,'&amp;')
      .replace(/</g,'&lt;')
      .replace(/[ ]/g,'&nbsp;')
      .replace(/[	]/g,'&nbsp;&nbsp;')

  }

  document.title = `View Src: ${url}`

  switch (extension) {
    case 'md':
      output.className = 'md'
    break

    case 'css':
    case 'eqcss':
    case 'jic':
      output.className = 'css'
    break

    case 'js':
    case 'json':
      output.className = 'js'
    break

    default:
      output.className = 'html'

  }

  hljs.initHighlightingOnLoad()
</script>